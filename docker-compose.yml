version: '3.8'

services:
  c-benchmarks:
    build:
      context: .
      dockerfile: c/Dockerfile
    container_name: c_benchmarks
    volumes:
      - shared-data:/usr/src/app/bin

  rust-benchmarks:
    build:
      context: .
      dockerfile: rust/Dockerfile
    container_name: rust_benchmarks
    volumes:
      - shared-data:/usr/src/app/bin

  analysis:
    build:
      context: .
      dockerfile: analysis/Dockerfile
    container_name: analysis
    volumes:
      - shared-data:/usr/src/app/bin
    depends_on:
      - c-benchmarks
      - rust-benchmarks

volumes:
  shared-data: